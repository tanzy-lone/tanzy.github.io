import{ai as i,aj as r,ca as u}from"./index-DmzJr1-1.js";function c(t,e){return i.post({url:t,data:e})}function l(t,e){return i.patch({url:t,data:e})}function g(t){return i.delete({url:t})}function f(t,e){return i.post({url:t,data:e})}const h=r("mainStore",{state:()=>({isLock:"",usersList:[],roleList:[],menuList:[],goodsList:[],categoryList:[],categoryCount:0,usersCount:0,roleCount:0,menuCount:0,goodsCount:0,currPage:{role:{offset:10,page:1},users:{offset:10,page:1},menu:{offset:10,page:1},goods:{offset:10,page:1},category:{offset:10,page:1}},filterRoute:[]}),getters:{},actions:{async getPageList(t){const{pageName:e,queryInfo:o}=t,a=`/${e}/list`,s=await c(a,o);switch(e){case"users":this.usersList=s.data.list,this.usersCount=s.data.totalCount;break;case"menu":this.menuList=s.data.list,this.menuCount=s.data.totalCount;break;case"role":this.roleList=s.data.list,this.roleCount=s.data.totalCount;break;case"goods":this.goodsList=s.data.list,this.goodsCount=s.data.totalCount;break;case"category":this.categoryList=s.data.list,this.categoryCount=s.data.totalCount;break}return s.data.list.length},async getEdit(t){const{pageName:e,id:o,editInfo:a}=t,s=`/${e}/${o}`,n=await l(s,a);console.log(n),this.getPageList({pageName:e,queryInfo:{offset:0,size:10}})},async handleDelete(t){const{id:e,pageName:o}=t,a=`/${o}/${e}`;await g(a),this.getPageList({pageName:o,queryInfo:{offset:0,size:10}})},async handleCreate(t){const{pageName:e,queryInfo:o}=t,a=`/${e}`;console.log(o);const s=await f(a,o);console.log(s),this.getPageList({pageName:e,queryInfo:{offset:0,size:10}})},changeLockStatus(t){this.isLock=t},hasTabs(t){return this.filterRoute.every(e=>e.url!==t.url)},changeFilterRoute(t){this.hasTabs(t)&&(console.log("payload",t),t.name==="home"&&!t.isClose?t.close=!1:t.close=!0,this.filterRoute.push(t))},removeTabsAction(t,e){let o=0;const a=this.filterRoute.filter((s,n)=>(s.url===t&&(o=n),s.url!==t));e&&u.push(this.filterRoute[o-1].url),this.filterRoute=a},setTabsListAction(t){this.filterRoute=t}},persist:{key:"user",storage:sessionStorage,paths:["isLock","filterRoute"]}}),C=h;export{C as u};
