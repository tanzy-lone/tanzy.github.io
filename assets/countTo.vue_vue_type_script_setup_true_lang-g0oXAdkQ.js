import{aO as N,aP as k,u as C,a as x,P as w,n as E,d as D,aJ as P,Q as $,aQ as z,o as X,c as j,C as q,U as G}from"./index-D9s0nCnu.js";function J(e){return N()?(k(e),!0):!1}function l(e){return typeof e=="function"?e():C(e)}function M(e,r=!1,t="Timeout"){return new Promise((u,s)=>{setTimeout(r?()=>s(t):u,e)})}function A(e){return e}const R={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]},U=Object.assign({},{linear:A},R);function H([e,r,t,u]){const s=(a,n)=>1-3*n+3*a,i=(a,n)=>3*n-6*a,c=a=>3*a,f=(a,n,o)=>((s(n,o)*a+i(n,o))*a+c(n))*a,d=(a,n,o)=>3*s(n,o)*a*a+2*i(n,o)*a+c(n),y=a=>{let n=a;for(let o=0;o<4;++o){const v=d(n,e,t);if(v===0)return n;const p=f(n,e,t)-a;n-=p/v}return n};return a=>e===r&&t===u?a:f(y(a),r,u)}function Q(e,r,t){return e+t*(r-e)}function _(e){return(typeof e=="number"?[e]:e)||[]}function K(e,r,t,u={}){var s,i;const c=l(r),f=l(t),d=_(c),y=_(f),a=(s=l(u.duration))!=null?s:1e3,n=Date.now(),o=Date.now()+a,v=typeof u.transition=="function"?u.transition:(i=l(u.transition))!=null?i:A,p=typeof v=="function"?v:H(v);return new Promise(g=>{e.value=c;const I=()=>{var S;if((S=u.abort)!=null&&S.call(u)){g();return}const m=Date.now(),V=p((m-n)/a),b=_(e.value).map((F,O)=>Q(d[O],y[O],V));Array.isArray(e.value)?e.value=b.map((F,O)=>{var T,h;return Q((T=d[O])!=null?T:0,(h=y[O])!=null?h:0,V)}):typeof e.value=="number"&&(e.value=b[0]),m<o?requestAnimationFrame(I):(e.value=f,g())};I()})}function B(e,r={}){let t=0;const u=()=>{const i=l(e);return typeof i=="number"?i:i.map(l)},s=x(u());return w(u,async i=>{var c,f;if(l(r.disabled))return;const d=++t;if(r.delay&&await M(l(r.delay)),d!==t)return;const y=Array.isArray(i)?i.map(l):l(i);(c=r.onStarted)==null||c.call(r),await K(s,s.value,y,{...r,abort:()=>{var a;return d!==t||((a=r.abort)==null?void 0:a.call(r))}}),(f=r.onFinished)==null||f.call(r)},{deep:!0}),w(()=>l(r.disabled),i=>{i&&(t++,s.value=u())}),J(()=>{t++}),E(()=>l(r.disabled)?u():s.value)}const W=D({__name:"countTo",props:{startVal:{type:Number,default:0},endVal:{type:Number,default:99},duration:{type:Number,default:1e3},autoplay:{type:Boolean,default:!0},cutting:{type:Boolean,default:!1},decimals:{type:Number,default:0,validator(e){return e>=0}},prefix:{type:String,default:""},suffix:{type:String,default:""},separator:{type:String,default:","},decimal:{type:String,default:"."},color:{type:String},useEasing:{type:Boolean,default:!0},transition:{type:String,default:"linear"}},emits:["onFinished","onStarted"],setup(e,{emit:r}){const t=e,u=r,s=x(t.startVal),i=x(!1);let c=B(s);const f=E(()=>a(C(c)));P(()=>{s.value=t.startVal}),w([()=>t.startVal,()=>t.endVal],()=>{t.autoplay&&d()}),$(()=>{t.autoplay&&d()});function d(){y(),s.value=t.endVal}function y(){c=B(s,{disabled:i,duration:t.duration,onFinished:()=>u("onFinished"),onStarted:()=>u("onStarted"),...t.useEasing?{transition:U[t.transition]}:{}})}function a(n){if(!n&&n!==0)return"";const{decimals:o,decimal:v,separator:p,suffix:g,prefix:I}=t;n=Number(n).toFixed(o),n+="";const S=n.split(".");let m=S[0];const V=S.length>1?v+S[1]:"",b=/(\d+)(\d{3})/;if(t.cutting){if(p&&!z(p))for(;b.test(m);)m=m.replace(b,"$1"+p+"$2")}else if(p&&!p)for(;b.test(m);)m=m.replace(b,"$1"+p+"$2");return I+m+V+g}return(n,o)=>(X(),j("div",{class:"countTo",style:G({color:e.color})},q(f.value),5))}});export{W as _};
