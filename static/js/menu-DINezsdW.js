import{b as P,r as N,o as c,c as g,f as i,t as C,ad as k,j as s,w as l,e as D,a7 as $,a2 as H,a3 as j,ah as W,g as m,W as ee,V as te,ai as ae,a6 as oe,aj as le,ak as ne,k as S,al as se,am as re,E as T,m as ce,q as ie,A as V,an as de,ao as ue,ap as pe,R as I,S as me,aq as M}from"./vender-DF28c6Qi.js";import{_ as B}from"./index-COOhnGZd.js";import{u as fe}from"./main-BIHNU41-.js";import{f as U}from"./formatTime-CKOAbVB1.js";const he={class:"table"},_e={class:"table-header"},ge={class:"title"},ye={style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},be={key:0,class:"footer"},xe=P({__name:"table",props:{title:{type:String,default:""},listData:{type:Array,default:()=>[]},tableData:{type:Object,default:()=>{}},isShowSelection:{type:Boolean,default:!0},isShowIndex:{type:Boolean,default:!0},currPage:{type:Number,default:1},offset:{type:Number,default:10},totalCount:{type:Number,default:1},childrenProps:{type:Object,default:()=>{}},showFooter:{type:Boolean,default:!0}},emits:["updateSize","updateCurrPage"],setup(t,{emit:b}){const u=t,a=N(),w=b,f=n=>{w("updateSize",n)},r=n=>{w("updateCurrPage",n)},p=n=>(u.currPage-1)*u.offset+n+1;return(n,x)=>{const y=te,E=ae;return c(),g("div",he,[i("div",_e,[i("h2",ge,C(t.title),1),k(n.$slots,"headerHandler",{},void 0,!0)]),s(m(ee),W({data:t.listData,stripe:"",border:"",style:{width:"100%"},"show-overflow-tooltip":""},t.childrenProps,{lazy:"",ref_key:"tableRef",ref:a}),{default:l(()=>[t.isShowSelection?(c(),D(y,{key:0,type:"selection",width:"50",align:"center"})):$("",!0),t.isShowIndex?(c(),D(y,{key:1,type:"index",label:"序号",width:"60",align:"center",index:p})):$("",!0),(c(!0),g(H,null,j(t.tableData,d=>(c(),D(y,W({key:d.label},d,{align:"center"}),{default:l(z=>[k(n.$slots,d.slotName,{row:z.row},()=>[i("div",ye,C(z.row[d.prop]??""),1)],!0)]),_:2},1040))),128))]),_:3},16,["data"]),t.totalCount>t.offset?(c(),g("div",be,[k(n.$slots,"footer",{},()=>[s(E,{"current-page":t.currPage,"page-size":t.offset,"page-sizes":[10,20,30],layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount,onSizeChange:f,onCurrentChange:r},null,8,["current-page","page-size","total"])],!0)])):$("",!0)])}}}),ve=B(xe,[["__scopeId","data-v-24646f21"]]),R=t=>(ce("data-v-a45e2ab4"),t=t(),ie(),t),Ne={class:"export-exel"},we={class:"exel_name"},Se=R(()=>i("label",{class:"",for:"filename"},"filename:",-1)),Ee={class:"export-type"},Ce=R(()=>i("label",{class:"type",for:""},"导出类型：",-1)),ke=P({__name:"exportExelBtn",props:{modelValue:{type:String,default:""},options:{type:Array,default:()=>[]}},emits:["clickExportExcel","setExcelName","changeExportType"],setup(t,{emit:b}){const u=N(""),a=b,w=t,f=p=>{a("changeExportType",p)},r=()=>{a("clickExportExcel")};return oe(u,p=>{a("setExcelName",p)}),(p,n)=>{const x=se,y=re,E=T;return c(),g("div",Ne,[i("div",we,[Se,le(i("input",{placeholder:"请输入导出的文件名称",class:"ipt","onUpdate:modelValue":n[0]||(n[0]=d=>u.value=d)},null,512),[[ne,u.value]])]),i("div",Ee,[Ce,s(y,{class:"m-2",placeholder:"请选择导出的类型",size:"large",modelValue:w.modelValue,"onUpdate:modelValue":f},{default:l(()=>[(c(!0),g(H,null,j(t.options,d=>(c(),D(x,{key:d.value,label:d.label,value:d.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),s(E,{type:"primary",class:"btn",onClick:r},{default:l(()=>[S("导出excel")]),_:1})])}}}),$e=B(ke,[["__scopeId","data-v-a45e2ab4"]]),Pe={class:"page-content"},ze={key:0,class:"export-excel-table"},Ae={class:"handler"},De=P({__name:"pageContent",props:{pageName:{type:String,default:""},contentDataConfig:{type:Object,default:()=>{}},isExportExcel:{type:Boolean,default:!1}},emits:["clickEdit"],setup(t,{expose:b,emit:u}){var L;const a=t,w=u,f=V(()=>({offset:r.currPage[`${a.pageName}`].offset,currPage:r.currPage[`${a.pageName}`].page})),r=fe(),p=N(0),n=N(!1),x=async(e={},h=!1)=>{n.value=h,h?p.value=await r.getPageList({pageName:a.pageName,queryInfo:{...e}}):p.value=await r.getPageList({pageName:a.pageName,queryInfo:{offset:(f.value.currPage-1)*f.value.offset,size:f.value.offset,...e}})};x();const y=V(()=>r[`${a.pageName}List`]),E=V(()=>n.value?p.value:r[`${a.pageName}Count`]),d=(L=a.contentDataConfig)==null?void 0:L.tableData.filter(e=>!(e.slotName==="enable"||e.slotName==="updateAt"||e.slotName==="createAt"||e.slotName==="handler")),z=e=>{w("clickEdit",e)},F=async e=>{r.handleDelete({pageName:a.pageName,id:e.id})},K=e=>{r.currPage[`${a.pageName}`].offset=e,x()},Y=e=>{r.currPage[`${a.pageName}`].page=e,x()},O=N(""),A=N("xlsx"),G=N([{label:"xlsx",value:"xlsx"},{label:"csv",value:"csv"},{label:"text",value:"text"}]),J=e=>{O.value=e},Q=e=>{A.value=e},X=()=>{const e=I.book_new(),h=I.json_to_sheet(y.value);I.book_append_sheet(e,h,"Sheet1");const v=me(e,{bookType:"xlsx",type:"array"});Z(v,`${O.value}.${A.value}`)},Z=(e,h)=>{const v=new Blob([e],{type:"application/octet-stream"}),o=URL.createObjectURL(v),_=document.createElement("a");_.href=o,_.setAttribute("download",h),document.body.appendChild(_),_.click(),document.body.removeChild(_)};return b({getPageList:x}),(e,h)=>{const v=T;return c(),g("div",Pe,[t.isExportExcel?(c(),g("div",ze,[s($e,{onClickExportExcel:X,onSetExcelName:J,onChangeExportType:Q,modelValue:A.value,"onUpdate:modelValue":h[0]||(h[0]=o=>A.value=o),options:G.value},null,8,["modelValue","options"])])):$("",!0),s(ve,W({"list-data":y.value},t.contentDataConfig,{currPage:f.value.currPage,offset:f.value.offset,"total-count":E.value,onUpdateSize:K,onUpdateCurrPage:Y}),de({headerHandler:l(()=>[k(e.$slots,"headerHandler",{},void 0,!0)]),enable:l(o=>[s(v,{type:o.row.enable==="0"?"danger":"success",plain:"",size:"small"},{default:l(()=>[S(C(o.row.enable==="0"?"禁用":"启用"),1)]),_:2},1032,["type"])]),updateAt:l(o=>[i("span",null,C(m(U)(o.row.updateAt)),1)]),createAt:l(o=>[i("span",null,C(m(U)(o.row.createAt)),1)]),handler:l(o=>[i("div",Ae,[s(v,{type:"primary",key:"primary",icon:m(ue),text:"",size:"small",onClick:_=>z(o.row)},{default:l(()=>[S("编辑")]),_:2},1032,["icon","onClick"]),s(v,{icon:m(pe),type:"danger",key:"danger",text:"",size:"small",onClick:_=>F(o.row)},{default:l(()=>[S("删除")]),_:2},1032,["icon","onClick"])])]),_:2},[j(m(d),o=>({name:o.slotName,fn:l(_=>[o.slotName?k(e.$slots,o.slotName,{key:0,row:_.row},void 0,!0):$("",!0)])}))]),1040,["list-data","currPage","offset","total-count"])])}}}),q=B(De,[["__scopeId","data-v-0e23c63b"]]),Te={tableData:[{prop:"name",label:"商品名称",minWidth:"90",slotName:"name"},{prop:"createAt",label:"创建时间",minWidth:"250",slotName:"createAt"},{prop:"updateAt",label:"更新时间",minWidth:"250",slotName:"updateAt"},{label:"操作",minWidth:"110",slotName:"handler"}],title:"商品分类",isShowIndex:!0,isShowSelection:!0},Ve={class:"category"},Ie={class:"header-handler"},We=P({__name:"category",setup(t){return(b,u)=>{const a=T;return c(),g("div",Ve,[s(q,{"page-name":"category","content-data-config":m(Te),"is-export-excel":""},{headerHandler:l(()=>[i("div",Ie,[s(a,{type:"primary"},{default:l(()=>[S("新建分类")]),_:1}),s(a,{icon:m(M)},null,8,["icon"])])]),_:1},8,["content-data-config"])])}}}),qe=Object.freeze(Object.defineProperty({__proto__:null,default:We},Symbol.toStringTag,{value:"Module"})),je={tableData:[{prop:"name",label:"菜单名称",minWidth:"120",slotName:"name"},{prop:"type",label:"类型",minWidth:"50",slotName:"type"},{prop:"url",label:"菜单url",minWidth:"150",slotName:"url"},{prop:"icon",label:"菜单图标",minWidth:"80",slotName:"icon"},{prop:"permission",label:"按钮权限",minWidth:"80",slotName:"permission"},{prop:"createAt",label:"创建时间",minWidth:"250",slotName:"createAt"},{prop:"updateAt",label:"更新时间",minWidth:"250",slotName:"updateAt"},{label:"操作",minWidth:"120",slotName:"handler"}],title:"菜单列表",childrenProps:{rowKey:"id",lazy:!0,treeProps:{children:"children",hasChildren:"hasChildren"}},isShowSelection:!1,isShowIndex:!1},Be={class:"menu"},Oe={class:"header-handler"},Le=P({__name:"menu",setup(t){return(b,u)=>{const a=T;return c(),g("div",Be,[s(q,{"page-name":"menu","content-data-config":m(je)},{headerHandler:l(()=>[i("div",Oe,[s(a,{type:"primary"},{default:l(()=>[S("新建菜单")]),_:1}),s(a,{icon:m(M)},null,8,["icon"])])]),_:1},8,["content-data-config"])])}}}),Fe=Object.freeze(Object.defineProperty({__proto__:null,default:Le},Symbol.toStringTag,{value:"Module"}));export{q as P,qe as c,Fe as m};
